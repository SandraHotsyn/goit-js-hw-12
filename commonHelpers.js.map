{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function fetchImages(query, page = 1, perPage = 12) {\n  const searchParams = new URLSearchParams({\n    key: '44785846-fbfadd775113e3685d7630ccf',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: false,\n    per_page: perPage,\n    page: page,\n  });\n  const url = `https://pixabay.com/api/?${searchParams}`;\n\n  return await axios\n    .get(url)\n    .then(response => {\n      console.log(response);\n      return {\n        images: response.data.hits,\n        totalImages: response.data.totalHits,\n      };\n    })\n    .catch(error => console.log(error));\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function clearGallery() {\n  const gallery = document.getElementById('gallery');\n  gallery.innerHTML = '';\n}\n\nlet lightBox;\nexport function displayImages(images) {\n  const gallery = document.getElementById('gallery');\n  gallery.insertAdjacentHTML(\n    'beforeend',\n    images\n      .map(\n        image => `\n        <div class=\"gallery-item\">\n            <a href=\"${image.largeImageURL}\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n            </a>\n            <div class=\"info\">\n                <p><strong>Likes:</strong><br>${image.likes}</p>\n                <p><strong>Views:</strong><br>${image.views}</p>\n                <p><strong>Comments:</strong><br>${image.comments}</p>\n                <p><strong>Downloads:</strong><br>${image.downloads}</p>\n            </div>\n        </div>`\n      )\n      .join('')\n  );\n  if (lightBox) {\n    lightBox.refresh();\n  } else {\n    lightBox = new SimpleLightbox('.gallery a', {\n      captions: true,\n      captionType: 'attr',\n      captionsData: 'alt',\n      captionPosition: 'bottom',\n      captionDelay: 250,\n    });\n  }\n}\n\nexport function showLoading() {\n  const loader = document.getElementById('loader');\n  loader.style.display = 'inline-block';\n}\n\nexport function hideLoading() {\n  const loader = document.getElementById('loader');\n  loader.style.display = 'none';\n}\n\nexport function notFoundMessage() {\n  iziToast.warning({\n    title: 'Not found',\n    message:\n      'Sorry, there are no images matching search query. Please try again!',\n    position: 'topRight',\n  });\n}\n\nexport function endOfListMessage() {\n  iziToast.info({\n    title: 'End of List',\n    message: \"We're sorry, but you've reached the end of search results.\",\n    position: 'topRight',\n  });\n}\n\nexport function errorMessage(error) {\n  iziToast.error({\n    title: 'Error',\n    message: error.message,\n    position: 'topRight',\n  });\n}\n\nexport function showLoadMoreButton() {\n  const loadMoreButton = document.getElementById('loadMoreButton');\n  loadMoreButton.style.display = 'inline-block';\n}\n\nexport function hideLoadMoreButton() {\n  const loadMoreButton = document.getElementById('loadMoreButton');\n  loadMoreButton.style.display = 'none';\n}\n\nexport function scrollDown() {\n  const galleryItem = document.querySelector('.gallery-item');\n  if (!galleryItem) {\n    return;\n  }\n  const pxToScroll = galleryItem.getBoundingClientRect().height * 2;\n  window.scrollBy({\n    top: pxToScroll,\n    behavior: 'smooth',\n  });\n}\n","import { fetchImages } from './js/pixabay-api';\nimport {\n  clearGallery,\n  displayImages,\n  showLoading,\n  hideLoading,\n  notFoundMessage,\n  endOfListMessage,\n  errorMessage,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  scrollDown,\n} from './js/render-functions.js';\n\nlet query = 'sert';\nlet currentPage = 1;\nconst perPage = 15;\n\n// document.getElementById('searchButton').addEventListener('click', async () => {\n//   currentPage = 1;\n//   query = document.getElementById('searchInput').value.trim();\n//   if (query === '') {\n//     return;\n//   }\n//   clearGallery();\n//   try {\n//     showLoading();\n//     const { images, totalImages } = await fetchImages(\n//       query,\n//       currentPage,\n//       perPage\n//     );\n//     if (images.length === 0) {\n//       notFoundMessage();\n//     } else {\n//       displayImages(images);\n//       showLoadMoreButton();\n//     }\n\n//     if (currentPage * perPage >= totalImages) {\n//       hideLoadMoreButton();\n//       endOfListMessage();\n//     }\n//   } catch (error) {\n//     errorMessage(error);\n//   } finally {\n//     hideLoading();\n//   }\n// });\n\ndocument\n  .getElementById('searchForm')\n  .addEventListener('submit', async event => {\n    event.preventDefault(); // Prevent the form from submitting the traditional way\n    currentPage = 1;\n    query = document.getElementById('searchInput').value.trim();\n    if (query === '') {\n      return;\n    }\n    clearGallery();\n    try {\n      showLoading();\n      const { images, totalImages } = await fetchImages(\n        query,\n        currentPage,\n        perPage\n      );\n      if (images.length === 0) {\n        notFoundMessage();\n      } else {\n        displayImages(images);\n        showLoadMoreButton();\n      }\n\n      if (currentPage * perPage >= totalImages) {\n        hideLoadMoreButton();\n        endOfListMessage();\n      }\n    } catch (error) {\n      errorMessage(error);\n    } finally {\n      hideLoading();\n    }\n  });\n\ndocument\n  .getElementById('loadMoreButton')\n  .addEventListener('click', async () => {\n    currentPage++;\n    try {\n      showLoading();\n      const { images, totalImages } = await fetchImages(\n        query,\n        currentPage,\n        perPage\n      );\n      if (images.length === 0) {\n        showNoResultsMessage();\n      } else {\n        displayImages(images);\n        scrollDown();\n        if (currentPage * perPage >= totalImages) {\n          hideLoadMoreButton();\n          endOfListMessage();\n        }\n      }\n    } catch (error) {\n      errorMessage(error);\n    } finally {\n      hideLoading();\n    }\n  });\n"],"names":["fetchImages","query","page","perPage","url","axios","response","error","clearGallery","gallery","lightBox","displayImages","images","image","SimpleLightbox","showLoading","loader","hideLoading","notFoundMessage","iziToast","endOfListMessage","errorMessage","showLoadMoreButton","loadMoreButton","hideLoadMoreButton","scrollDown","galleryItem","pxToScroll","currentPage","event","totalImages"],"mappings":"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"}